/*!
 * jQCloud Plugin for jQuery
 *
 * Version 1.0.4
 *
 * Copyright 2011, Luca Ongaro
 * Licensed under the MIT license.
 *
 * Date: 2015-01-20 20:16:32 +0000
*/
!function(t){"use strict";t.fn.jQCloud=function(e,i){var h=this,n=h.attr("id")||Math.floor(1e6*Math.random()).toString(36),r={width:h.width(),height:h.height(),center:{x:(i&&i.width?i.width:h.width())/2,y:(i&&i.height?i.height:h.height())/2},delayedMode:e.length>50,shape:!1,encodeURI:!0,removeOverflowing:!0};i=t.extend(r,i||{}),h.addClass("jqcloud").width(i.width).height(i.height),"static"===h.css("position")&&h.css("position","relative");var o=function(){var r=function(t,e){var i=function(t,e){return Math.abs(2*t.offsetLeft+t.offsetWidth-2*e.offsetLeft-e.offsetWidth)<t.offsetWidth+e.offsetWidth&&Math.abs(2*t.offsetTop+t.offsetHeight-2*e.offsetTop-e.offsetHeight)<t.offsetHeight+e.offsetHeight?!0:!1},h=0;for(h=0;h<e.length;h++)if(i(t,e[h]))return!0;return!1};0===e.length&&t("ul",h).length&&(t("ul li",h).each(function(){e.push({text:t(this).text(),weight:t(this).data("weight")})}),t("ul",h).hide());for(var o=0;o<e.length;o++)e[o].weight=parseFloat(e[o].weight,10);e.sort(function(t,e){return t.weight<e.weight?1:t.weight>e.weight?-1:0});var a="rectangular"===i.shape?18:2,s=[],d=i.width/i.height,l=function(o,l){var f,c=n+"_word_"+o,g=6.28*Math.random(),u=0,w=0,p=0,v=5,m="",x="";if(l.html=t.extend(l.html,{id:c}),l.html&&l.html["class"]&&(m=l.html["class"],delete l.html["class"]),e[0].weight>e[e.length-1].weight&&(v=Math.round((l.weight-e[e.length-1].weight)/(e[0].weight-e[e.length-1].weight)*9)+1),f=t("<span>").attr(l.html).addClass("w"+v+" "+m),l.link?("string"==typeof l.link&&(l.link={href:l.link}),i.encodeURI&&(l.link=t.extend(l.link,{href:encodeURI(l.link.href).replace(/'/g,"%27")})),x=t("<a>").attr(l.link).text(l.text)):x=l.text,f.append(x),l.handlers)for(var M in l.handlers)l.handlers.hasOwnProperty(M)&&"function"==typeof l.handlers[M]&&t(f).bind(M,l.handlers[M]);h.append(f);var k=f.width(),y=f.height(),R=i.center.x-k/2,b=i.center.y-y/2,C=f[0].style;for(C.position="absolute",C.left=R+"px",C.top=b+"px";r(f[0],s);){if("rectangular"===i.shape)switch(w++,w*a>(1+Math.floor(p/2))*a*(p%4%2===0?1:d)&&(w=0,p++),p%4){case 1:R+=a*d+2*Math.random();break;case 2:b-=a+2*Math.random();break;case 3:R-=a*d+2*Math.random();break;case 0:b+=a+2*Math.random()}else u+=a,g+=(o%2===0?1:-1)*a,R=i.center.x-k/2+u*Math.cos(g)*d,b=i.center.y+u*Math.sin(g)-y/2;C.left=R+"px",C.top=b+"px"}return i.removeOverflowing&&(0>R||0>b||R+k>i.width||b+y>i.height)?void f.remove():(s.push(f[0]),void(t.isFunction(l.afterWordRender)&&l.afterWordRender.call(f)))},f=function(n){return n=n||0,h.is(":visible")?void(n<e.length?(l(n,e[n]),setTimeout(function(){f(n+1)},10)):t.isFunction(i.afterCloudRender)&&i.afterCloudRender.call(h)):void setTimeout(function(){f(n)},10)};i.delayedMode?f():(t.each(e,l),t.isFunction(i.afterCloudRender)&&i.afterCloudRender.call(h))};return setTimeout(function(){o()},10),h}}(jQuery);